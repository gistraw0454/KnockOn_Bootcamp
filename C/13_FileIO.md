# ğŸŒˆ 13. íŒŒì¼ ì…ì¶œë ¥
## ğŸ’¡ íŒŒì¼ ì…ì¶œë ¥?
1. **íŒŒì¼ ì…ì¶œë ¥ì˜ ê°œë…ê³¼ í•„ìš”ì„±**
- í”„ë¡œê·¸ë¨ì´ êº¼ì§„ ì´í›„ì—ë„ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ íŒŒì¼ ì…ì¶œë ¥ í•„ìš”
- ì–´ë–¤ ë°ì´í„°ë¥¼ í”„ë¡œê·¸ë¨ ì•ˆì—ì„œë§Œ ì‚¬ìš©ë˜ëŠ”ê²Œ ì•„ë‹ˆë¼ í”„ë¡œê·¸ë¨ ì™¸ë¶€ë¡œ ì¼ì‹œì ìœ¼ë¡œ ì €ì¥ì‹œì¼œë†¨ë‹¤ê°€ ë‹¤ì‹œ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ê±°ë‚˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ë„ë¡í•´ì„œ ì´ì „ì˜ ìƒíƒœë¥¼ ê·¸ëŒ€ë¡œ í”„ë¡œê·¸ë¨ ë‚´ë¶€ë¡œ ê°€ì ¸ì˜¬ìˆ˜ ìˆê²Œ í•˜ê¸°ìœ„í•´ì„œ í•„ìš”
    - ram cpuëŠ” íœ˜ë°œì„± ë©”ëª¨ë¦¬ë¼ ì‚¬ë¼ì§.
    - ë°”íƒ•í™”ë©´ì—ìˆëŠ” íŒŒì¼ë“¤ì€ ssd í•˜ë“œë””ìŠ¤í¬ì™€ê°™ì€ ë³´ì¡° ê¸°ì–µì¥ì¹˜ì— ì €ì¥ì´ë˜ê³ , ê·¸ê±¸ ì‹¤í–‰í•˜ë©´ ê·¸ í”„ë¡œê·¸ë¨ì´ í”„ë¡œì„¸ìŠ¤ë¡œ ë³€í™˜ë˜ë©° ramì— ë“¤ì–´ê°€ êµ¬ë™í•˜ê²Œë˜ê³ , cpuê°€ ramì„ ì½ì–´ ì‹¤í–‰í•¨
2. **íŒŒì¼ ì—´ê¸°ì™€ ë‹«ê¸°**
- íŒŒì¼ ì…ì¶œë ¥ ë³€ìˆ˜ëŠ” fileí˜•ì‹ì˜ í¬ì¸í„° ë³€ìˆ˜ë¡œ ì„ ì–¸
- `fopen()`ìœ¼ë¡œ ì—´ê³  `fclose()`ë¡œ ë‹«ê¸°
```c
FILE *fp;
fp = fopen(ê²½ë¡œ,ì ‘ê·¼ë°©ì‹);  // ë™ì í• ë‹¹ëœê²ƒì´ë‹ˆ ë‹«ì•„ì¤˜ì•¼ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ì—†ìŒ
fclose(fp);
```
- `r` : ì½ê¸°ëª¨ë“œ
- `w` : ì“°ê¸°ëª¨ë“œ
- `a` : íŒŒì¼ì— ì ‘ê·¼í•´ ë°ì´í„°ë¥¼ ë’¤ì—ì„œë¶€í„° ê¸°ë¡
3. **íŒŒì¼ì—ì„œ ë°ì´í„° ì½ê³  ì“°ê¸°**
- `fprintf(íŒŒì¼í¬ì¸í„°, ì„œì‹, í˜•ì‹ì§€ì •ì);`
- `fscanf(íŒŒì¼í¬ì¸í„°, ì„œì‹, í˜•ì‹ì§€ì •ì);`
4. **íŒŒì¼ ìœ„ì¹˜ ì§€ì‹œì ê°œë…, ì œì–´í•˜ëŠ” í•¨ìˆ˜ë“¤**
- íŒŒì¼ìœ„ì¹˜ì§€ì‹œì
    - íŒŒì¼ì„ ì–´ë””ê¹Œì§€ ì½ì–´ë“¤ì˜€ëŠ”ì§€, ë°›ì•„ë“¤ì˜€ëŠ”ì§€ì— ëŒ€í•œ ìœ„ì¹˜ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
    - íŒŒì¼êµ¬ì¡°ì²´
        - í™˜ê²½ì—ë”°ë¼ ë‹¤ë¥´ë‹¤. íŒŒì¼êµ¬ì¡°ì²´ê°€ ì–´ë–»ê²Œ ìƒê²»ëŠ”ì§€ ì•Œê¸° ì–´ë µë‹¤
            - íŒŒì¼ ìŠ¤íŠ¸ë¦¼ì„ ë§Œë“œëŠ” ì£¼ì²´ëŠ” í”„ë¡œê·¸ë˜ë¨¸ê°€ ì•„ë‹Œ osê¸° ë•Œë¬¸
    - íŒŒì¼ìœ„ì¹˜ì§€ì‹œìëŠ” ì–´ëŠí™˜ê²½ì—ì„œë„ íŒŒì¼ êµ¬ì¡°ì²´ì˜ ë©¤ë²„ì¤‘ í•˜ë‚˜ë‹¤.
- `fseek(fp,-2,SEEK_END)`
    - íŒŒì¼ìœ„ì¹˜ ì§€ì‹œìë¥¼ ì›€ì§ì¼ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í•¨ìˆ˜
    - ë‘ë²ˆì§¸ ì¸ì : ì•ë’¤ë°©í–¥ìœ¼ë¡œ ì–¼ë§ˆë‚˜ ì›€ì§ì¼ì§€ ì •ìˆ˜ë¡œ ë°›ìŒ
        - ìŒìˆ˜ì¼ë•Œ ì•, ì–‘ìˆ˜ì¼ë•Œ ë’¤
            - íŒŒì¼ë‚´ìš©ì´ 123456789ë©´, EOF->9->8 ìœ¼ë¡œ 8ì„ ê°€ë¦¬í‚¤ê²Œë¨.
    - ì„¸ë²ˆì§¸ ì¸ì : ìœ„ì¹˜ë³€ê²½í•˜ê¸°ìœ„í•œ ê¸°ì¤€ ì •ìˆ˜
        - SEEK_SET // 0ê³¼ ê°™ë‹¤. ì´ ìƒìˆ˜ëŠ” íŒŒì¼ì˜ ì‹œì‘ì„ ê¸°ì¤€ìœ¼ë¡œ ì§€ì •í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.
        - SEEK_CUR // 1ê³¼ ê°™ë‹¤. ì´ ìƒìˆ˜ëŠ” í˜„ì¬ ì§€ì‹œìì˜ ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì§€ì •í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.
        - SEEK_END // 2ì™€ ê°™ë‹¤. ì´ ìƒìˆ˜ëŠ” íŒŒì¼ì˜ ëì„ ê¸°ì¤€ìœ¼ë¡œ ì§€ì •í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

    ```c
    int main() {
        FILE *fp=fopen("seek.bin", "rb");
        char arr[6];
        char num;
        fread((void *)arr, sizeof(char),Â 5, fp);    //ì§€ì‹œìê°€ Hello ë’¤ì—ìˆìŒ
        arr[5]='\0';
        puts(arr);
        fseek(fp, SEEK_SET, 0); //ì§€ì‹œìë¥¼ ì‹œì‘ìœ¼ë¡œ ì˜®ê¹€
        fread((void *)arr, sizeof(char),Â 5, fp);    //ì§€ì‹œìê°€ Hello ë’¤ì—ìˆìŒ
        arr[5]='\0';
        puts(arr);
        fseek(fp, SEEK_END, 0); //ì§€ì‹œìë¥¼ íŒŒì¼ ë§¨ë’¤ë¡œ ì˜®ê¹€
        fread((void *)&num, sizeof(char), 1, fp);   //íŒŒì¼ ëì—ëŠ” ëì„ ì•Œë¦¬ëŠ” EOFê°€ ì¡´ì¬(ë¬¸ìì—´ì˜ \0 ê°™ì€ê²ƒ). ì´ë¥¼ ì¶œë ¥í•˜ê²Œë¨.
        putchar(num);
        fclose(fp);
    }
    //íŒŒì¼ë‚´ìš©ì´ Hello SEEK! ë©´, 
    //Hello
    //Hello
    //EOF ì¶œë ¥ë¨
    ```

5. **íŒŒì¼ ì…ì¶œë ¥ê³¼ ì—ëŸ¬ ì²˜ë¦¬**
```c
#include <string.h>

char* strerror(int errnum);
```
- erro ë¼ëŠ” ë§¤í¬ë¡œë¥¼ ë„£ì–´ ë¬¸ìì—´ë¡œ ì¶œë ¥í•˜ë©´ ì–´ë–¤ ì˜¤ë¥˜ê°€ ìˆì—ˆëŠì§€ ì¹œì ˆí•˜ê²Œ ì•Œë ¤ì¤€ë‹¤.
- íŒŒì¼ì´ ì œëŒ€ë¡œ ì—´ë¦¬ì§€ ì•Šì„ë•Œì— ëŒ€í•œ ì˜ˆì™¸ì²˜ë¦¬ì½”ë“œëŠ” ì•„ë˜ì™€ê°™ì´ ì‘ì„±ê°€ëŠ¥
    ```c
    #include <stdio.h>
    #include <string.h>
    #include <errno.h>

    void use_file(const char* filename)
    {
        FILE* stream = fopen(filename, "rb");
        
        if (stream == NULL)
        {
            fprintf(stderr, "%s\n", strerror(errno));
            return;
        }
        
        /* code */
    }
    ```
    - ì—ëŸ¬ì½”ë“œë¥¼ ì‘ì„±í•´ì£¼ëŠ” ì½”ë“œë¥¼ ì•Œì•„ì„œ ë‚´ë¶€ì ìœ¼ë¡œ í•´ì£¼ëŠ” í•¨ìˆ˜ì¸ perrorì„ ì¨ë„ëœë‹¤.
```c
#include <stdio.h>

void perror(const char* str);
```
- perror
    ```c
    #include <stdio.h>

    void use_file(const char* filename)
    {
        FILE* stream = fopen(filename, "rb");
        
        if (stream == NULL)
        {
            perror("ì˜¤ë¥˜ì˜¤ë¥˜ì˜¤ë¥˜");
            return;
        }
        
        /* code */
    }

    /*
    íŒŒì¼ ì—´ê¸°ì— ì‹¤íŒ¨í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤.

    ì˜¤ë¥˜ì˜¤ë¥˜ì˜¤ë¥˜: No such file or directory
    */
    ```
    - ì˜¤ë¥˜ê°€ ìƒê¸¸ë•Œ, ì˜¤ë¥˜ì½”ë“œë¥¼ ë°”ë¡œ ë°˜í™˜í•´ì£¼ê±°ë‚˜ ì–´ë”˜ê°€ì— ì˜¤ë¥˜ì½”ë“œë¥¼ ë“¤ê³ ìˆë‹¤ê°€ í”„ë¡œê·¸ë˜ë¨¸ê°€ í•„ìš”í•˜ë©´ ì˜¤ë¥˜ì½”ë“œë¥¼ ë°˜í™˜í•´ì¤€ë‹¤.
6. **íŒŒì¼ ë””ìŠ¤í¬ë¦½í„° (fd)**
- íŒŒì¼ì— ì ‘ê·¼í•˜ê¸°ìœ„í•œ ë°©ë²• (ì¼ë°˜ì  ì •ê·œíŒŒì¼, ë””ë ‰í† ë¦¬, ì†Œì¼“, íŒŒì´í”„, ë¸”ë¡ë””ë°”ì´ìŠ¤, ìºë¦­í„° ë“±ì˜ ëª¨ë“  ê°ì²´)
    - 0 : í‘œì¤€ ì…ë ¥ (Standard Input, STDIN_FILENO)
    - 1 : í‘œì¤€ ì¶œë ¥ (Standard Output, STDOUT_FILENO)
    - 2 : í‘œì¤€ ì—ëŸ¬ (Standard Error, STDERR_FILENO)
- íŒŒì¼ì„ opení• ë•Œ (ì ‘ê·¼ì‹œ) íŒŒì¼ ë””ìŠ¤í¬ë¦½í„°ëŠ” 0ë¶€í„° Nê¹Œì§€ ìˆ«ìë¥¼ ì°¨ë¡€ë¡œ ë¶€ì—¬ë°›ìœ¼ë©°, 0,1,2ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ë©”ëª¨ë¦¬ì—ì„œ ì‹¤í–‰ì„ ì‹œì‘í• ë•Œ ê¸°ë³¸ì ìœ¼ë¡œ í• ë‹¹ë˜ëŠ” íŒŒì¼ë””ìŠ¤í¬ë¦½í„°ì´ë‹¤.
```c
/* ë°ì´í„°ë¥¼ ëª‡ ë²ˆ ì½ì—ˆëŠ”ì§€ ë°˜í™˜ */
size_t fread(void* buffer, size_t size, size_t count, FILE* stream);

/* ë°ì´í„°ë¥¼ ëª‡ ë²ˆ ì¼ëŠ”ì§€ ë°˜í™˜ */
size_t fwrite(const void* buffer, size_t size, size_t count, FILE* stream);

/* ìŠ¤íŠ¸ë¦¼ì„ ë°˜í™˜í•˜ê³  ì—´ê¸° ì‹¤íŒ¨í•˜ë©´ NULL ë°˜í™˜ */
FILE* fopen(const char* filename, const char* mode);

/* íŒŒì¼ ë‹«ê¸°ë¥¼ ì„±ê³µí•˜ë©´ 0ì„ ë°˜í™˜í•˜ê³  ì‹¤íŒ¨í•˜ë©´ EOF ë°˜í™˜ */
int fclose(FILE* stream);

/* ìŠ¤íŠ¸ë¦¼ì˜ ë²„í¼ë¥¼ ì˜ ë¹„ì› ìœ¼ë©´ 0ì„ ë°˜í™˜í•˜ê³  ì‹¤íŒ¨í•˜ë©´ EOF ë°˜í™˜ */
int fflush(FILE* stream);

/* ìŠ¤íŠ¸ë¦¼ì˜ EOFí‘œì‹œìì˜ ìƒíƒœë¥¼ ë°˜í™˜í•˜ë©° EOFê°€ ì•„ë‹ˆë©´ 0, EOFë©´ 0ì´ ì•„ë‹Œ ê°’ì„ ë°˜í™˜ */
int feof(FILE* stream);

/* ìŠ¤íŠ¸ë¦¼ì˜ ì˜¤ë¥˜ í‘œì‹œìì˜ ìƒíƒœë¥¼ ë°˜í™˜í•˜ë©° ì˜¤ë¥˜ê°€ ì—†ìœ¼ë©´ 0, ìˆìœ¼ë©´ 0ì´ ì•„ë‹Œ ê°’ì„ ë°˜í™˜ */
int ferror(FILE* stream);

/* EOFí‘œì‹œì, ì˜¤ë¥˜ í‘œì‹œìì˜ ê°’ì´ ì˜ ì§€ì›Œì§€ì§€ ì•Šì•„ì„œ ê·¸ ê°’ì„ ê°•ì œë¡œ ì§€ì›Œì£¼ëŠ” í•¨ìˆ˜ */
void clearerr(FILE* stream);
```
>íŒŒì¼ ì…ì¶œë ¥ì€ í”„ë¡œê·¸ë¨ì´ íŒŒì¼ì— ë°ì´í„°ë¥¼ ì“°ê±°ë‚˜ íŒŒì¼ë¡œë¶€í„° ë°ì´í„°ë¥¼ ì½ëŠ” ì‘ì—…ì„ ë§í•©ë‹ˆë‹¤. íŒŒì¼ ì…ì¶œë ¥ì„ ì´ìš©í•˜ë©´ í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œëœ í›„ì—ë„ ë°ì´í„°ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìœ¼ë©°, ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ê³¼ ë°ì´í„°ë¥¼ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

>íŒŒì¼ ì…ì¶œë ¥ì€ fopen, fclose í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ìˆ˜í–‰í•  ìˆ˜ ìˆìœ¼ë©°, íŒŒì¼ì—ì„œ ë°ì´í„°ë¥¼ ì½ê³  ì“°ëŠ” ê²ƒì€ fscanf, fprintf, fread, fwrite ë“±ì˜ í•¨ìˆ˜ë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•œí¸, fseek, ftell ë“±ì˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ ìœ„ì¹˜ ì§€ì‹œìë¥¼ ì œì–´í•  ìˆ˜ ì‡ìŠµë‹ˆë‹¤.

## ğŸ“„ ì½”ë“œë¶„ì„
```c
// ë‹¤ì–‘í•œ ëª¨ë“œë¥¼ ì‚¬ìš©í•´ ë´…ì‹œë‹¤.
#include <stdio.h>

int main() {
    FILE *fp;
    fp = fopen("test.txt", "w");

    if(fp == NULL) {
        printf("íŒŒì¼ ì—´ê¸° ì‹¤íŒ¨");
        return 0;
    }

    fprintf(fp, "Hello, File!");

    fclose(fp);

    return 0;
}

```
```c
// ëª¨ë“  ì¤„ì„ ì½ì„ ìˆ˜ ìˆë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì—¬ ë´…ì‹œë‹¤.
#include <stdio.h>

int main() {
    FILE *fp;
    char str[20];

    fp = fopen("test.txt", "r");

    if(fp == NULL) {
        printf("íŒŒì¼ ì—´ê¸° ì‹¤íŒ¨");
        return 0;
    }

    fscanf(fp, "%s", str);

    printf("%s\n", str);

    fclose(fp);

    return 0;
}

```
```c
// ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œëŠ” íŒŒì¼ ìœ„ì¹˜ ì§€ì‹œìë¥¼ ì´ìš©í•œ ì˜ˆì‹œì…ë‹ˆë‹¤.
#include <stdio.h>

int main() {
    FILE *fp;
    char str[20];

    fp = fopen("test.txt", "r+");

    if(fp == NULL) {
        printf("íŒŒì¼ ì—´ê¸° ì‹¤íŒ¨");
        return 0;
    }

    fprintf(fp, "Hello, File!");

    fseek(fp, 0, SEEK_SET);

    fscanf(fp, "%s", str);

    printf("%s\n", str);

    fclose(fp);

    return 0;
}

```
## ğŸ”¥ Challenge !!
1. **1ë²ˆì§¸ ì˜ˆì‹œì—ì„œ ë‹¤ë¥¸ ëª¨ë“œë¡œ íŒŒì¼ì„ ì—´ì–´ë³´ê¸° (ì˜ˆ: "a", "r+", "w+")**
-  ëª¨ë‘ ê°™ì€ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ì „ë¶€ ì“°ê¸° ê¸°ëŠ¥ì„ í¬í•¨í•˜ê³ ìˆìŒ.
- a: ì¶”ê°€í•´ì„œ ì“°ê¸° ëª¨ë“œ
- r+ : ì½ê³  ì“°ê¸° ëª¨ë“œ
- w+ : ì“°ê³  ì½ê¸° ëª¨ë“œ
2. **2ë²ˆì§¸ ì˜ˆì‹œì—ì„œ íŒŒì¼ ì „ì²´ë¥¼ ì½ì–´ë³´ê¸° (whileë¬¸ê³¼ feof í•¨ìˆ˜ ì‚¬ìš©)**
```c
// ëª¨ë“  ì¤„ì„ ì½ì„ ìˆ˜ ìˆë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì—¬ ë´…ì‹œë‹¤.
#include <stdio.h>

int main() {
    FILE *fp;
    char str[20];

    fp = fopen("test.txt", "r");

    if(fp == NULL) {
        printf("íŒŒì¼ ì—´ê¸° ì‹¤íŒ¨");
        return 0;
    }

    while(!feof(fp)){
        fscanf(fp, "%s", str);
        printf("%s\n", str);

    }
    // while(fscanf(fp, "%s", str)!=EOF){
    //     printf("%s\n", str);
    // }
    fclose(fp);

    return 0;
}
```
3. **3ë²ˆì§¸ ì˜ˆì‹œì—ì„œ fseek()ë¥¼ ì´ìš©í•˜ì—¬ 3ë²ˆ ë°˜ë³µí•˜ì—¬ ì½ì–´ë³´ê¸°**
```c
// ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œëŠ” íŒŒì¼ ìœ„ì¹˜ ì§€ì‹œìë¥¼ ì´ìš©í•œ ì˜ˆì‹œì…ë‹ˆë‹¤.
#include <stdio.h>

int main() {
    FILE *fp;
    char str[20];

    fp = fopen("test.txt", "r+");

    if(fp == NULL) {
        printf("íŒŒì¼ ì—´ê¸° ì‹¤íŒ¨");
        return 0;
    }

    fprintf(fp, "Hello, File!");

    for (int i=0; i<3;i++){
    fseek(fp, 0, SEEK_SET);

    fscanf(fp, "%s", str);

    printf("%s ", str);
    fscanf(fp, "%s", str);

    printf("%s\n", str);
    }
    fclose(fp);

    return 0;
}
```